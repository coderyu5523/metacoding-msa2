<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>배달 완료</title>
</head>
<body>
  <h2>배달 완료</h2>
  <input type="number" id="orderId" placeholder="주문 ID" />
  <button onclick="completeDelivery()">배달 완료</button>
  <pre id="log"></pre>

  <script>
    const TOKEN = "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxIiwidXNlcm5hbWUiOiJzc2FyIiwiZXhwIjoxNzY5MzIyOTQ3fQ.9VZqD8mdkPzgL6pKr6R-qElL5tHCakwM9dkYfDdN0TB__FCzZaLzuTbrCkduf87TPzW83qxCUDRMaiLGrH2E2g";
    const log = document.getElementById('log');
    const println = (s) => (log.textContent += s + "\n");

    async function completeDelivery() {
      const orderId = document.getElementById('orderId').value;
      if (!orderId) {
        println("✗ 주문 ID를 입력하세요.");
        return;
      }

      try {
        println(`배달 완료 요청 중... (orderId: ${orderId})`);
        const response = await fetch(`/api/deliveries/${orderId}/complete`, {
          method: 'PUT',
          headers: { 'Authorization': `Bearer ${TOKEN}` }
        });

        if (response.ok) {
          const data = await response.json();
          println("✓ 배달 완료: " + JSON.stringify(data));
          document.getElementById('orderId').value = '';
        } else {
          println("✗ 실패: " + await response.text());
        }
      } catch (error) {
        println("✗ 오류: " + error.message);
      }
    }
  </script>
</body>
</html>
