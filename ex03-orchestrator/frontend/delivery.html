<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
</head>
<body>
  <h1>배달기사 화면</h1>
  <input type="number" id="orderId" placeholder="주문 ID" />
  <button onclick="completeDelivery()">배달 완료</button>
  <pre id="log"></pre>

  <script>
    const TOKEN = "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxIiwidXNlcm5hbWUiOiJzc2FyIiwiZXhwIjoxNzY5NDEwMzU4fQ.NkcCFYoQpKfCphOnl1O9qZSM9iDA8ACwsXtZzcPY7Vm6f4GRHnINOS8-0L0tLfF1OlwhdH0VSopfjng7cM3nVQ";
    const log = document.getElementById('log');
    const println = (s) => (log.textContent += s + "\n");

    async function completeDelivery() {
      const orderId = document.getElementById('orderId').value;
      if (!orderId) {
        println("✗ 주문 ID를 입력하세요.");
        return;
      }

      try {
        println(`배달 완료 요청 중... (orderId: ${orderId})`);
        const response = await fetch(`/api/deliveries/${orderId}/complete`, {
          method: 'PUT',
          headers: { 'Authorization': `Bearer ${TOKEN}` }
        });

        if (response.ok) {
          println("배달 완료");
          document.getElementById('orderId').value = '';
        } else {
          println("실패: " + await response.text());
        }
      } catch (error) {
        println("오류: " + error.message);
      }
    }
  </script>
</body> 
</html>
